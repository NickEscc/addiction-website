<!-- website/Services/logic/game.html -->
{% extends 'index.html' %}
{% load static %}

{% block title %}Poker Game - Python Games{% endblock %}

{% block content %}
<div class="container">
    <main id="main">
        <script type="text/javascript">
            var staticUrl = "{% static 'images/' %}";
            window.staticUrl = staticUrl; // Ensure window.staticUrl is defined
            var playerId = "{{ player_id|escapejs }}";
            var playerName = "{{ player_name|escapejs }}";
            var playerMoney = "{{ player_money|escapejs|default:'0' }}";
            var roomId = "{{ room_id|escapejs }}";
        </script>

        <h1 style="text-align: center;">Poker Game - Room: {{ room_id }}</h1>

        <div id="game-wrapper">
            <div class="row">
                <div id="table-wrapper" class="col-sm-8">
                    <div id="players"></div>
                    <div id="table">
                        <div class="game-info">
                            <div id="pots"></div>
                            <div id="shared-cards"></div>
                        </div>
                    </div>
                </div>

                <div id="current-player-wrapper" class="col-sm-4">
                    <h4>Welcome, {{ player_name }}!</h4>

                    <div id="game-status">
                        <p data-key="4"></p>
                        <p data-key="3"></p>
                        <p data-key="2"></p>
                        <p data-key="1"></p>
                        <p data-key="0"></p>
                    </div>

                    <p>Enjoy your poker game :)</p>

                    <div id="current-player" class="player" data-player-id="{{ player_id }}" data-player-name="{{ player_name }}" data-player-money="{{ player_money }}">
                        <div class="cards">
                            <span class="category"></span>
                        </div>
                    </div>

                    <!-- Updated "Start Game" button with custom blue styling -->
                    <div id="start-game-wrapper" style="display:none; margin-top:10px;">
                        <button id="start-game-cmd" class="btn btn-custom-blue">Start Game</button>
                        <p>Press this once all players are in.</p>
                    </div>

                    <div id="player-controls">
                        <div id="bet-controls" class="controls" style="display: none;">
                            <div id="fold-cmd-wrapper">
                                <button id="fold-cmd" class="btn btn-danger">Fold</button>
                            </div>
                            <div id="bet-input-wrapper" style="display: none;">
                                <input id="bet-input" type="text" data-slider-min="0" data-slider-max="1000" data-slider-step="1" data-slider-value="0"/>
                            </div>
                            <div id="bet-cmd-wrapper" style="display: none;">
                                <button id="bet-cmd" class="btn btn-primary">Bet</button>
                            </div>
                            <div id="no-bet-cmd-wrapper" style="display: none;">
                                <button id="no-bet-cmd" class="btn btn-warning">No Bet</button>
                            </div>
                        </div>
                        <div id="cards-change-controls" class="controls" style="display: none;">
                            <button id="cards-change-cmd" class="btn btn-primary">Change Cards</button>
                        </div>
                    </div>
                    <div style="margin-top: 20px;">
                        <a href="{% url 'logout' %}" class="btn btn-secondary">Logout</a>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>
{% endblock %}
